#include<iostream>
#include<GLFW/glfw3>

using namespace std;
int main()
{
  glfwInit();
  glfwWindowHint(GLFW_CONTEXT_VERSION_MAJOR,3);
  glfwWindoeHint(GLFW_CONTEXT_VERSION_MINOR,3);
  glfwWindoeHint(GLFW_OPENGL_PROFILE,GLFW_CORE_PROFILE);
  glfwWindowHint(GLFW_RESIZABLE,GL_TRUE);
  GLuint vertex_shader,fragment_shader,shader_program,VBO,VAO;
  const GLchar *vertexsource={ "#version 330 core\n"
			       "layout (location=0) in vec3 pos;\n"
			       "void main()\n"
			       "{\n"
			       "gl_Position=vec4(pos.x,pos.y,pos.z,1.0);\n"
			       "}\n/0"};
  const GLchar *fragmentsource={"#version 330 core\n"
				"out vec4 color;\n"
				"void main()\n"
				"{\n"
				"color=vec4(1.0f,0..2f.0.3f,0.4f);\n"
			  	"}\n/0"};
  /* Creating vertex shader*/
  vertex_shader=glCreateShader(GL_VERTEX_SHADER);
  /* Binding vertex shadr to source code*/
  glShaderSource(vertex_shader,1,&vertexsource,NULL);
  /* Creating fragment shader*/
  fragment_shader=glCreateShader(GL_FRAGMENT_SHADER);
  /* Binding fraagment shader to source code*/
  glShaderSource(fragment_shader,1,&fragmentsource,NULL);
  GLint successvertex,success_fragment,success_linking;
  char info_vertex[512],info_fragment[512],info_linking[512];
  /* Compiling vertex shader*/
  glCompileShader(vertex_shader);
  /* Checking compilatio errors*/
  glGetShaderiv(vertex_shader,GL_COMPILE_STATUS,&success_vertex);
  if(!success_vertex)
    {
      glGetShaderInfoLog(vertex_shader,512,NULL,info_vertex);
      cout<<"Cannot compile vertex shader : "<<info_vertex<<endl;
      return 1;
    }
  else
    cout<<"Vertex shader compilation successful"<<endl;

  /* Compiling fragment shader*/
  glCompileShader(fragmentshader);
  /* Checking for compilation errors*/
  glGetShaderiv(fragmentshader,GL_COMPILE_STATUS&,success_fragment);
  if(!success_fragment)
    {
      glGetShaderInfoLog(fragmentshader,512,NULL,info_fragment);
      cout<<"Cannot compile fragment shader : "<<info_fragment<<endl;
    }
  else
    cout<<"Fragment shader cmpilation successful"<<endl;
  /* Attaching both shaders together in shader program*/
  GLuint shaderprogram;
  shaderprogram=glCreateProgram();
  glAttachShader(shaderprogram,vertex_shader);
  glAttachShader(shaderprogram,fragment_shader);
  glLinkProgram(shaderprogram);

  /* Checking for linking errors*/
  glGetProgramiv(shaderprogram,GL_LINK_STATUS,&success_linking);
  if(!success_linking)
    {
      glGetProgramInfoLog(shaderprogram,512,NULL,info-linking);
      cout<<"Cannot link the shaders : "<<info_linking<,endl;
    }
  else
    cout<<"Linking successful"<<endl;


}
